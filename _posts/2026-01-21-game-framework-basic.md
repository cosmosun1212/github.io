---
layout: post
title: "[C언어로 게임만들기] 01. 게임 엔진의 심장, 메인 루프와 유니티의 비밀"
date: 2026-01-21 11:30:00 +0900
categories: [C언어로 게임만들기]
tags: [C언어, 게임개발, 유니티, GameLoop, 구조]
---

## 게임 엔진의 심장, 메인 루프 (Main Loop)

게임을 만든다는 것은 무엇일까요? 단순히 화면에 그림을 띄우는 것이 아닙니다. 게임은 끊임없이 **입력을 받고, 계산하고, 화면을 그리는 과정**의 반복입니다. 이것을 우리는 **게임 루프(Game Loop)**라고 부릅니다.

오늘은 C언어로 게임을 만들지만, 실제로는 **유니티(Unity) 엔진의 내부 구조**와 비슷한 형태의 프레임으로 만들어 보겠습니다. 이 구조를 이해하면 나중에 유니티를 배울 때 "아! 이게 그때 그 기능이구나!" 하고 무릎을 탁 치게 될 겁니다.

### 1. 전체 코드 구조

우리가 앞으로 채워나갈 게임의 뼈대입니다. `main` 함수 안에 있는 `while(1)`이 바로 게임의 심장입니다.

```cpp
int main(void)
{
    // [1] 초기화 단계
    Awake(); // 객체 생성 및 변수 초기화 (유니티: GetComponent 등)
    Start(); // 활성화 시점의 초기화 (유니티: 실제 로직 준비)

    InitTime(); // 시간 타이머 초기화

    while (1)
    {
        // [2] 시간 계산 (Time.deltaTime)
        // 현재 프레임에 걸린 시간을 계산하여 변수에 저장
        UpdateTime(); 

        // [3] 입력 처리 (Input System)
        // 키보드/마우스 상태를 미리 캡처하여 버퍼에 저장
        ProcessInput(); 

        // [4] 물리 연산 (FixedUpdate)
        // 지정된 시간 간격(예: 0.02초)마다 실행. 
        // 렉이 걸려도 물리 연산 횟수는 보장됨 (while문 사용)
        while (NeedFixedUpdate()) 
        {
            FixedUpdate();
        }

        // [5] 게임 로직 (Update)
        // 매 프레임마다 실행 (이동, 공격, 타이머 등)
        Update();

        // [6] 후처리 로직 (LateUpdate)
        // Update가 끝난 후 실행 (카메라 이동, 위치 보정)
        LateUpdate();

        // [7] 렌더링 파이프라인
        PreRender();  // 더블 버퍼링 클리어 등
        Render();     // 실제 그리기
        PostRender(); // 버퍼 교체 (Flip) 등
    }

    Release(); // 메모리 해제 (OnDestroy)
    
    return 0;
}
